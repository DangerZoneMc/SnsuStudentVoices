import{T as b,j as _,f as n,o as i,a as d,u as o,Z as k,w as u,b as r,d as c,k as y,g as p,v as L,e as U,F as g,l as C,c as B}from"./app-CRkK36wv.js";import{_ as V}from"./Chirp-BtC3FTmE.js";import{_ as v}from"./InputError-DZ_DqzMn.js";import{P as R}from"./PrimaryButton-YFl2EgGx.js";import{A as j}from"./AuthenticatedLayout-wYXvNF2a.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-pdSWPXoP.js";const M={class:"max-w-2xl mx-auto p-4 sm:p-6 lg:p-8"},N={key:0,class:"mt-2 relative"},F=["src"],T=["src"],W={class:"mt-2"},$={class:"mt-6 bg-white shadow-sm rounded-lg divide-y"},D={__name:"Index",props:["chirps"],setup(f){const s=b({message:"",media:null}),l=_(null),h=t=>{const e=t.target.files[0];e&&(s.media=e,l.value=URL.createObjectURL(e))},m=()=>{s.media=null,l.value&&(URL.revokeObjectURL(l.value),l.value=null)},w=t=>{var e;return(e=t==null?void 0:t.type)==null?void 0:e.startsWith("image/")},x=t=>{var e;return(e=t==null?void 0:t.type)==null?void 0:e.startsWith("video/")};return(t,e)=>(i(),n(g,null,[d(o(k),{title:"Chirps"}),d(j,null,{default:u(()=>[r("div",M,[r("form",{onSubmit:e[2]||(e[2]=c(a=>{o(s).post(t.route("chirps.store"),{onSuccess:()=>{o(s).reset(),m()}})},["prevent"]))},[y(r("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>o(s).message=a),placeholder:"What's on your mind?",class:"block w-full rounded-md shadow-sm"},null,512),[[L,o(s).message]]),d(v,{message:o(s).errors.message,class:"mt-2"},null,8,["message"]),l.value?(i(),n("div",N,[r("button",{onClick:c(m,["prevent"]),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",title:"Remove media"},e[3]||(e[3]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])),w(o(s).media)?(i(),n("img",{key:0,src:l.value,alt:"Upload preview",class:"rounded-lg max-h-96 object-contain",onError:e[1]||(e[1]=a=>a.target.src="/path/to/fallback-image.png")},null,40,F)):x(o(s).media)?(i(),n("video",{key:1,src:l.value,controls:"",class:"rounded-lg max-h-96 w-full"}," Your browser does not support the video tag. ",8,T)):p("",!0)])):p("",!0),r("div",W,[r("input",{type:"file",onChange:h,accept:"image/*,video/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32)]),d(v,{message:o(s).errors.media,class:"mt-2"},null,8,["message"]),d(R,{class:"mt-4"},{default:u(()=>e[4]||(e[4]=[U("Chirp")])),_:1})],32),r("div",$,[(i(!0),n(g,null,C(f.chirps,a=>(i(),B(V,{key:a.id,chirp:a},null,8,["chirp"]))),128))])])]),_:1})],64))}};export{D as default};
